var carotaTest=function(){var d=function(){var d={bounds:[100,100,2100,600],identity:"sim1",privacy:"PUBLIC",slide:1001,target:"presentationSpace",requestedWidth:2E3,width:2E3,height:500,x:100,y:100,type:"multiWordText",author:UserSettings.getUsername(),words:_.map(_.range(0,5E3),function(c){return{text:sprintf("primo %s secundo %s tertius %s quaternius %s quintum %s ",c,c,c,c,c),italic:0==c%2,bold:0==c%5,underline:0==c%20,color:["#00ff00",255],size:25}})};boardContent.multiWordTexts[d.identity]=
d;prerenderMultiwordText(d);boardContent.multiWordTexts[d.identity].doc.invalidateBounds();d=boardContent.multiWordTexts[d.identity].bounds;console.log(d[3]-d[1],d)},k=0;return{paint:function(){k++},getPaintCount:function(){return k},prime:d,run:function(){d();carotaTest.sample=function(){for(var d=sprintf("Textbox sample render width %s words",5E4),c=blit,m=[],g=0;1>g;g++){var b=new Date;c();m.push(new Date-b)}c=_.sum(m);m=_.mean(m);console.log(sprintf("//Average %s milis over %s runs of %s in %s milis",
m,1,d,c));console.log(sprintf("Paint called %s times",carotaTest.getPaintCount()))};carotaTest.sample()}}}();
(function(){(function(d){var k,f,c,m,g,b={".js":[],".json":[],".css":[],".html":[]},e="function"===typeof require?require:null;m=function(a){a=Error("Could not find module '"+a+"'");a.code="MODULE_NOT_FOUND";return a};g=function(a,p,l){var e,h;if("function"===typeof a[p+l])return p+l;for(e=0;h=b[l][e];++e)if("function"===typeof a[p+h])return p+h;return null};k=function(a,b,l,e,h,c){var d,q;l=l.split(/[\\/]/);d=l.pop();if("."===d||".."===d)l.push(d),d="";for(;null!=(q=l.shift());)if(q&&"."!==q&&(".."===
q?(a=b.pop(),c=c.slice(0,c.lastIndexOf("/"))):(b.push(a),a=a[q],c+="/"+q),!a))throw m(e);d&&"function"!==typeof a[d]&&((l=g(a,d,".js"))||(l=g(a,d,".json")),l||(l=g(a,d,".css")),l||(l=g(a,d,".html")),l?d=l:2!==h&&"object"===typeof a[d]&&(b.push(a),a=a[d],c+="/"+d,d=""));if(!d)return 1!==h&&a[":mainpath:"]?k(a,b,a[":mainpath:"],e,1,c):k(a,b,"index",e,2,c);h=a[d];if(!h)throw m(e);if(h.hasOwnProperty("module"))return h.module.exports;e={};h.module=d={exports:e,id:c+"/"+d};h.call(e,e,d,f(a,b,c));return d.exports};
c=function(a,b,l,c){var h,g=l;h=l.charAt(0);var f=0;if("/"===h){g=g.slice(1);a=d["/"];if(!a){if(e)return e(l);throw m(l);}c="/";b=[]}else if("."!==h){h=g.split("/",1)[0];a=d[h];if(!a){if(e)return e(l);throw m(l);}c=h;b=[];g=g.slice(h.length+1);g||((g=a[":mainpath:"])?f=1:(g="index",f=2))}return k(a,b,g,l,f,c)};f=function(a,b,e){return function(g){return c(a,[].concat(b),g,e)}};return f(d,[],"")})({carota:{src:{"carota.js":function(d,k,f){d=f("./node");var c=f("./editor"),m=f("./doc"),g=f("./dom"),
b=f("./runs"),e=f("./html"),a=f("./frame"),p=f("./text");f=f("./rect");f={node:d,editor:c,document:m,dom:g,runs:b,html:e,frame:a,text:p,rect:f};k.exports=f;if("undefined"!==typeof window&&window.document){if(window.carota)throw Error("Something else is called carota!");window.carota=f}},"characters.js":function(d,k,f){function c(a,b,l){return Object.create(e,{_runs:{value:a},_run:{value:b},_offset:{value:l},"char":{value:b>=a.length?null:g.getTextChar(a[b].text,l)}})}function m(a,b){for(;b<a.length;b++)if(0!=
g.getTextLength(a[b].text))return c(a,b,0);return c(a,a.length,0)}var g=f("./runs"),b=function(a,b){if(a._runs!==b._runs)throw Error("Characters for different documents");},e={equals:function(a){b(this,a);return this._run===a._run&&this._offset===a._offset},cut:function(a){b(this,a);var e=this;return function(b){for(var c=e._run;c<=a._run;c++){var h=e._runs[c];if(h){var d=c===e._run?e._offset:0,m=c===a._run?a._offset:g.getTextLength(h.text);d<m&&g.getSubText(function(a){var e=Object.create(h);e.text=
a;b(e)},h.text,d,m-d)}}}}};k.exports=function(a){return function(b){for(var e=m(a,0);!b(e)&&null!==e["char"];)e=e._offset+1<g.getTextLength(a[e._run].text)?c(a,e._run,e._offset+1):m(a,e._run+1)}}},"codes.js":function(d,k,f){var c=f("./text"),m=f("./frame"),g=f("./node"),b=f("./rect"),e=f("./util"),a=g.derive({parent:function(){return this._parent},draw:function(a){this.inline.draw(a,this.left,this.baseline,this.measured.width,this.measured.ascent,this.measured.descent,this.formatting)},position:function(a,
b,e){this.left=a;this.baseline=b;e&&(this._bounds=e)},bounds:function(){return this._bounds||b(this.left,this.baseline-this.measured.ascent,this.measured.width,this.measured.ascent+this.measured.descent)},byCoordinate:function(a,b){return a<=this.bounds().center().x?this:this.next()}}),p={number:function(a,b){var e=b+1+".";return{measure:function(a){return c.measure(e,a)},draw:function(a,b,g,l,t,n,x){c.draw(a,e,x,b,g,l,t,n)}}}};p.listNext=p.listEnd=function(a){return e.derive(a,{eof:!0,measure:function(a){return{width:18,
ascent:0,descent:0}},draw:function(a,b,e){}})};p.listStart=function(c,d,h){return e.derive(c,{block:function(e,d,p,w,t,n){var x=g.generic("list",t,e,d),v,f,k,A=function(n,b){v=g.generic("item",x);var c=h(n.marker||{$:"number"},x.children().length);if(!c.draw||!c.measure)throw Error();k=Object.create(a,{inline:{value:c},_parent:{value:v},ordinal:{value:w},length:{value:1},formatting:{value:b},measured:{value:c.measure(b)}});k.block=!0;f=m(e+50,d,p-50,w+1,v,function(a){return"listEnd"===a.$},k.measured.ascent)};
A(c,n);return function(a){f?f(function(a){w=a.ordinal+a.length;var n=a.bounds(),c=a.first(),g=e+50-10-k.measured.width,t=b(e,d,50,n.h);"baseline"in c?k.position(g,c.baseline,t):k.position(g,d+k.measured.ascent,t);d=n.t+n.h;v.children().push(k);v.children().push(a);v.finalize();x.children().push(v);v=f=k=null},a):w++;if(!f){var n=a.code();if(n){if("listEnd"==n.$)return x.finalize(),x;"listNext"==n.$&&A(n,a.codeFormatting())}}}}})};k.exports=d=function(a,b,e){var c=p[a.$];return c&&c(a,b,e)};d.editFilter=
function(a){var b=0;if(!a.words.some(function(c,g){var d=c.code();if(d)switch(d.$){case "listStart":b++;break;case "listNext":if(0===b)return a.spliceWordsWithRuns(g,1,[e.derive(c.codeFormatting(),{text:{$:"listStart",marker:d.marker}})]),!0;break;case "listEnd":0===b&&a.spliceWordsWithRuns(g,1,[]),b--}})&&0<b){for(var c=[];0<b;)b--,c.push({text:{$:"listEnd"}});a.spliceWordsWithRuns(a.words.length-1,0,c)}}},"doc.js":function(d,k,f){var c=f("per"),m=f("./characters"),g=f("./split"),b=f("./word");d=
f("./node");var e=f("./runs"),a=f("./range"),p=f("./util"),l=f("./frame"),w=f("./codes"),h=f("./rect"),y=function(a,n,b,e){var c=a.selection.start,g=a.selection.end;return function(d){a._wordOrdinals=[];var h=Array.prototype.splice.apply(a.words,[n,b].concat(e));d(y(a,n,e.length,h));a._nextSelection={start:c,end:g}}},u=function(a){var n=[],b=function(a){n.push(a);b.length=n.length};a(b);return function(a){a(u(function(a){for(;n.length;)n.pop()(a)}))}},q=function(a){if(a.isNewLine())return!0;a=a.code();
return!(!a||!a.block&&!a.eof)},r=d.derive({invalidateBounds:function(){var a=this.frame.bounds(),n=this.position;this.bounds=[n.x+a.l,n.y+a.t,n.x+this.frame.actualWidth(),n.y+a.h];this.stanza.bounds=this.bounds;Progress.call("textBoundsChanged",[this.identity,this.bounds])},load:function(a){var n=this;this.undo=[];this.redo=[];this._wordOrdinals=[];this.words=c(m(a)).per(g(n.codes)).map(function(a){return b(a,n.codes)}).all();this.words.push(b());this.layout()},layout:function(){this.frame=null;try{this.frame=
c(this.words).per(l(0,0,this._width,0,this)).first(),this.invalidateBounds()}catch(a){console.error("layout exception",a)}if(!this.frame)console.error("A bug somewhere has produced an invalid state - rolling back"),this.performUndo();else if(this._nextSelection){var b=this._nextSelection;delete this._nextSelection;this.select(b.start,b.end,!0)}},range:function(b,n){return a(this,b,n)},documentRange:function(){return this.range(0,this.frame.length-1)},selectedRange:function(){return this.range(this.selection.start,
this.selection.end)},save:function(){return this.documentRange().save()},paragraphRange:function(a,n){var b;b=this.wordContainingOrdinal(a);a=0;if(b&&!q(b.word))for(b=b.index;0<b;b--)if(q(this.words[b-1])){a=this.wordOrdinal(b);break}b=this.wordContainingOrdinal(n);n=this.frame.length-1;if(b&&!q(b.word))for(b=b.index;b<this.words.length;b++)if(q(this.words[b])){n=this.wordOrdinal(b);break}return this.range(a,n)},insert:function(a,b){this.select(this.selection.end+this.selectedRange().setText(a),null,
b)},modifyInsertFormatting:function(a,b){carota.runs.nextInsertFormatting=carota.runs.nextInsertFormatting||{};carota.runs.nextInsertFormatting[a]=b;this.notifySelectionChanged()},applyInsertFormatting:function(a){var b=carota.runs.nextInsertFormatting,e=Object.keys(b);e.length&&a.forEach(function(a){e.forEach(function(e){a[e]=b[e]})})},wordOrdinal:function(a){if(a<this.words.length){var b=this._wordOrdinals.length;if(b<a+1)for(var e=0<b?this._wordOrdinals[b-1]:0;b<=a;b++)this._wordOrdinals[b]=e,
e+=this.words[b].length;return this._wordOrdinals[a]}},wordContainingOrdinal:function(a){var b,e=0;this.words.some(function(c,g){if(a>=e&&a<e+c.length)return b={word:c,ordinal:e,index:g,offset:a-e},!0;e+=c.length});return b},runs:function(a,b){var e=this.wordContainingOrdinal(Math.max(0,b.start)),c=this.wordContainingOrdinal(Math.min(b.end,this.frame.length-1))||e;if(!e||!c)throw new Exception("range miss");if(e.index===c.index)e.word.runs(a,{start:e.offset,end:c.offset});else{e.word.runs(a,{start:e.offset});
for(e=e.index+1;e<c.index;e++)this.words[e].runs(a);c.word.runs(a,{end:c.offset})}},spliceWordsWithRuns:function(a,e,d){var h=this,p=c(m(d)).per(g(h.codes)).truthy().map(function(a){return b(a,h.codes)}).all(),l=!1;if("_filtersRunning"in h)h._filtersRunning++;else{for(d=0;d<e;d++)this.words[a+d].code()&&(l=!0);l||(l=p.some(function(a){return!!a.code()}))}this.transaction(function(b){y(h,a,e,p)(b);if(l){h._filtersRunning=0;try{for(;;){var c=h._filtersRunning;if(!h.editFilters.some(function(a){a(h);
return c!==h._filtersRunning}))break}}finally{delete h._filtersRunning}}})},splice:function(a,b,g){if("string"===typeof g){var d=Math.max(0,a-1),d=c({start:d,end:d+1}).per(this.runs,this).first();g=[d?Object.create(d,{text:{value:g}}):{text:g}]}else Array.isArray(g)||(g=[{text:g}]);this.applyInsertFormatting(g);var d=this.wordContainingOrdinal(a),h=this.wordContainingOrdinal(b);h||(h=d);a===d.ordinal?0<d.index&&!q(this.words[d.index-1])?(d.index--,a=this.words[d.index],a=c({}).per(a.runs,a).all()):
a=[]:a=c({end:d.offset}).per(d.word.runs,d.word).all();b===h.ordinal?b===this.frame.length-1||q(h.word)?(b=[],h.index--):b=c({}).per(h.word.runs,h.word).all():b=c({start:h.offset}).per(h.word.runs,h.word).all();var p=this.frame.length;this.spliceWordsWithRuns(d.index,h.index-d.index+1,c(a).concat(g).concat(b).per(e.consolidate()).all());return this.frame?this.frame.length-p:0},registerEditFilter:function(a){this.editFilters.push(a)},width:function(a){if(0===arguments.length)return this._width;this._width=
a;this.layout();return a},children:function(){return[this.frame]},toggleCaret:function(){var a=this.caretVisible;if(this.selection.start===this.selection.end){if(this.selectionJustChanged)return this.selectionJustChanged=!1,this.caretVisible=!0;this.caretVisible=!this.caretVisible}return this.caretVisible!==a},getCaretCoords:function(a){var b=this.byOrdinal(a);if(b)return b.block&&0<a?(b=this.byOrdinal(a-1),b.newLine?(a=b.bounds,b=b.parent().parent().bounds,a=h(b.l,b.b,1,a.h)):(a=b.bounds,a=h(a.r,
a.t,1,a.h))):(a=b.bounds(),a=a.h?h(a.l,a.t,1,a.h):h(a.l,a.t,a.w,1)),a},byCoordinate:function(a,b){for(var e=this.frame.byCoordinate(a,b).ordinal,c=this.getCaretCoords(e);c.b<=b&&e<this.frame.length-1;)e++,c=this.getCaretCoords(e);for(;c.t>=b&&0<e;)e--,c=this.getCaretCoords(e);return this.byOrdinal(e)},drawSelection:function(a,b){this.selection.end!==this.selection.start&&(a.save(),a.fillStyle=b?"rgba(0, 100, 200, 0.3)":"rgba(160, 160, 160, 0.3)",this.selectedRange().parts(function(b){b.bounds(!0).fill(a)}),
a.restore())},notifySelectionChanged:function(a){var b=this;this.updateCanvas();this.selectionChanged.fire(function(){return b.selectedRange().getFormatting()},a)},select:function(a,b,e){this.frame?(this.selection.start=Math.max(0,a),this.selection.end=Math.min("number"===typeof b?b:this.selection.start,this.frame.length-1),carota.runs.nextInsertFormatting={},this.notifySelectionChanged(e),this.selectionJustChanged=!0):console.log("Something has gone terribly wrong - doc.transaction will rollback soon")},
performUndo:function(a){var b=a?this.undo:this.redo;if(a=(a?this.redo:this.undo).pop())a(function(a){b.push(a)}),this.layout(),self.updateCanvas(),this.contentChanged.fire()},canUndo:function(a){return a?!!this.redo.length:!!this.undo.length},transaction:function(a){if(this._currentTransaction)a(this._currentTransaction);else{for(var b=this;50<this.undo.length;)b.undo.shift();this.redo.length=0;var e=!1;this.undo.push(u(function(c){b._currentTransaction=c;try{a(c)}finally{e=0<c.length,b._currentTransaction=
null}}));e&&(b.layout(),b.updateCanvas(),b.contentChanged.fire())}},type:"document"});k.exports=function(a){var b=Object.create(r);b.stanza=a;b.position={x:a.x,y:a.y};b.privacy=a.privacy;b.identity=a.identity;b.slide=Conversations.getCurrentSlideJid();b._width=0;b.selection={start:0,end:0};b.caretVisible=!0;b.customCodes=function(a,b,e){};b.codes=function(a,e){return w(a,e,b.codes)||b.customCodes(a,e,b.codes)};b.selectionChanged=p.event();b.contentChanged=p.event();b.editFilters=[w.editFilter];b.load([]);
return b}},"dom.js":function(d,k,f){d.isAttached=function(c){for(;c.parentNode;)c=c.parentNode;return!!c.body};d.clear=function(c){for(;c.firstChild;)c.removeChild(c.firstChild)};d.setText=function(c,m){d.clear(c);c.appendChild(document.createTextNode(m))};d.handleEvent=function(c,d,g){c.addEventListener(d,function(b){!1===g(b)&&b.preventDefault()})};d.handleMouseEvent=function(c,m,g){d.handleEvent(c,m,function(b){var e=c.getBoundingClientRect();return g(b,b.clientX-e.left,b.clientY-e.top)})};d.effectiveStyle=
function(c,d){return document.defaultView.getComputedStyle(c).getPropertyValue(d)}},"editor.js":function(d,k,f){f("per");var c=f("./doc"),m=f("./dom"),g=f("./rect"),b=null;Date.now();var e=d.paint=function(a,e,c){carotaTest.paint();var d=a.getContext("2d");a=g(0,0,a.width,a.height);"PRIVATE"==e.privacy&&(d.fillStyle="red",d.globalAlpha=.1,d.fillRect(0,0,e.frame.actualWidth(),e.frame.height),d.globalAlpha=1);e.draw(d,a);e.isActive&&Modes.currentMode==Modes.text&&e.drawSelection(d,b||c);d.restore()};
d.create=function(a,d,g){a.innerHTML='<div class="carotaTextArea" style="overflow: hidden; position: absolute; height: 0;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; padding: 0px; width: 1000px; height: 1em; top: -10000px; left:-10000px; outline: none; font-size: 4px;"></textarea></div>';d=d||a.querySelector("canvas");a.querySelector(".carotaTextArea");var f=a.querySelector("textarea"),h=c(g),k=0,u=null,q=null,r=null,t="",n=null,x=null;
h.width(d.clientWidth);h.claimFocus=function(){$(f).focus()};h.updateCanvas=function(){var a=this.canvas=$("<canvas/>")[0],b=this.bounds[2]-this.bounds[0],c=this.bounds[3]-this.bounds[1],d=Math.min(1,32767/c),g=a.getContext("2d");a.width=b*d;a.height=c*d;g.scale(d,d);e(a,h,document.focussedElement==f)};var v={66:"bold",73:"italic",85:"underline",83:"strikeout"},z=function(a,b){var e=h.getCaretCoords(a),c;for(q=null!==u?u:e.l;!(0>b?0>=a:a>=h.frame.length-1)&&!(a+=b,c=h.getCaretCoords(a),c.b<=e.t||
e.b<=c.t););for(e=c;!((0>b?0>=a:a>=h.frame.length-1)||0<b&&c.l>=q||0>b&&c.l<=q);)if(a+=b,c=h.getCaretCoords(a),c.b<=e.t||e.b<=c.t){a-=b;break}return a},C=function(a,b){for(var e=h.getCaretCoords(a),c;!(0>b?0>=a:a>=h.frame.length-1);)if(a+=b,c=h.getCaretCoords(a),c.b<=e.t||e.b<=c.t){a-=b;break}return a},A=function(a,b,e){var c=h.selection.start,d=h.selection.end,g=h.frame.length-1,l=!1;q=null;if(!b)k=0;else if(!k)switch(a){case 37:case 38:case 36:case 33:k=-1;break;case 39:case 40:case 35:case 34:k=
1}var p=1===k?d:c,f=!1;switch(a){case 37:b||c==d?0<p&&(e?(f=h.wordContainingOrdinal(p),p=f.ordinal===p?0<f.index?h.wordOrdinal(f.index-1):0:f.ordinal):p--):p=c;f=!0;break;case 39:b||c==d?p<g&&(e?(f=h.wordContainingOrdinal(p),p=f.ordinal+f.word.length):p++):p=d;f=!0;break;case 40:p=z(p,1);f=!0;break;case 38:p=z(p,-1);f=!0;break;case 36:p=C(p,-1);f=!0;break;case 35:p=C(p,1);f=!0;break;case 33:p=0;f=!0;break;case 34:p=g;f=!0;break;case 8:c===d&&0<c&&(h.range(c-1,c).clear(),r=c-1,h.select(r,r,!0),l=!0);
break;case 46:c===d&&c<g&&(h.range(c,c+1).clear(),l=!0);break;case 90:e&&(l=!0,h.performUndo());break;case 89:e&&(l=!0,h.performUndo(!0));break;case 65:e&&(l=!0,h.select(0,g,!0));break;case 67:case 88:e&&(n=h.selectedRange().save(),x=h.selectedRange().plainText())}a=v[a];e&&a&&(e=h.selectedRange(),e.setFormatting(a,!0!==e.getFormatting()[a]),blit(),l=!0);if(f){switch(k){case 0:c=d=p;break;case -1:c=p;break;case 1:d=p}c===d?k=0:c>d&&(k=-k,e=d,d=c,c=e);r=p;h.select(c,d,!0);l=!0}u=q;return l};m.handleEvent(f,
"keydown",function(a){if(A(a.keyCode,a.shiftKey,a.ctrlKey))return!1});m.handleEvent(f,"input",function(){var a=f.value;t!=a&&(t="",f.value="",a===x&&(a=n),h.insert(a,!0))});var D=function(){r=null===r?h.selection.end:r;t=h.selectedRange().plainText();f.value=t;f.select();f.focus()};h.dblclickHandler=function(a){u=null;h.isActive=!0;(a=a.parent())&&h.select(a.ordinal,a.ordinal+(a.word?a.word.text.length:a.length));D();h.update()};h.mousedownHandler=function(a){B=0;b=a.ordinal;h.select(a.ordinal,a.ordinal,
!1);u=null};h.mousemoveHandler=function(a){null!==b&&a&&(r=a.ordinal,b>a.ordinal?h.select(a.ordinal,b,!1):h.select(b,a.ordinal,!1))};h.mouseupHandler=function(a){u=null;h.isActive=!0;D();h.update()};var B=(new Date).getTime();h.update=function(){if(Conversations.getCurrentSlideJid()==h.slide&&h.isActive){var a=(new Date).getTime();if(a>B&&(B=a+500,h.toggleCaret())){var a=h.selectionJustChanged||h.caretVisible,b=boardContext,e=h.getCaretCoords(h.selection.start);if(e){b.save();var c=worldToScreen(h.position.x,
h.position.y),d=scale();b.translate(c.x,c.y);b.scale(d,d);b.globalAlpha=1;b.fillStyle=a?"black":"white";e.fill(b);b.restore()}}setTimeout(h.update,500)}};h.sendKey=A;return h}},"frame.js":function(d,k,f){d=f("./node");var c=f("./wrap"),m=f("./rect"),g=d.derive({bounds:function(){var b=this._bounds;if(!b||!_.every(["l","t","w","h"],function(a){return a in b})){var e=0,a=0,c=0,d=0;this.lines&&this.lines.length&&(a=this.lines[0].bounds(),e=a.l,a=a.t,this.lines.forEach(function(a,b){var e=a.bounds();
c=Math.max(c,e.l+e.w);d=Math.max(d,e.t+e.h)}));this._bounds=m(e,a,Math.max(c-e,scaleWorldToScreen(Modes.text.minimumWidth)),Math.max(this.height?this.height:d-a,scaleWorldToScreen(Modes.text.minimumHeight())))}return this._bounds},actualWidth:function(){if(!this._actualWidth){var b=0;this.lines&&this.lines.forEach(function(e){"number"===typeof e.actualWidth&&(b=Math.max(b,e.actualWidth))});this._actualWidth=Math.max(scaleWorldToScreen(Modes.text.minimumWidth),b)}return this._actualWidth},children:function(){return this.lines},
parent:function(){return this._parent},draw:function(b,e){this.lines&&this.lines.some(function(a){a.draw(b,e)})},type:"frame"});k.exports=function(b,e,a,d,l,f,h,m){var k=[],q=Object.create(g,{lines:{value:k},_parent:{value:l},ordinal:{value:d}}),r=c(b,e,a,d,q,f,h,m),t=0,n=0;return function(a,b){if(r(function(a){"number"===typeof a?n=a:(t=a.ordinal+a.length-d,k.push(a))},b))return Object.defineProperty(q,"length",{value:t}),Object.defineProperty(q,"height",{value:n}),a(q),!0}}},"html.js":function(d,
k,f){var c=f("./runs"),m=f("per");k=function(a,b){return function(e,c){e.nodeName===a&&(c[b]=!0)}};var g=function(a,b,e,c){return function(d,g){var h=d[a]&&d[a][b];h&&(c&&(h=c(h)),g[e]=h)}};f=function(a,b,e){return g("attributes",a,b,e)};var b=function(a,b,e){return g("style",a,b,e)},e=function(a,b,e){return function(c,d){c.style&&c.style[a]===b&&(d[e]=!0)}},a=[6,7,9,10,12,16,20,30],p={left:!0,center:!0,right:!0,justify:!0},l=function(a){return p[a]?a:"left"},w=function(a){var b=a.split(/\s*,\s*/g);
if(0==b.length)return a;a=b[0];return(b=a.match(/^"(.*)"$/))?b[1].trim():(b=a.match(/^'(.*)'$/))?b[1].trim():a},h={H1:30,H2:20,H3:16,H4:14,H5:12},y=[k("B","bold"),k("STRONG","bold"),k("I","italic"),k("EM","italic"),k("U","underline"),k("S","strikeout"),k("STRIKE","strikeout"),k("DEL","strikeout"),e("fontWeight","bold","bold"),e("fontStyle","italic","italic"),e("textDecoration","underline","underline"),e("textDecoration","line-through","strikeout"),b("color","color"),b("fontFamily","font",w),b("fontSize",
"size",function(a){return(a=a.match(/^([\d\.]+)pt$/))?parseFloat(a[1]):10}),b("textAlign","align",l),function(a,b){"SUB"===a.nodeName&&(b.script="sub")},function(a,b){"SUPER"===a.nodeName&&(b.script="super")},function(a,b){"CODE"===a.nodeName&&(b.font="monospace")},function(a,b){var e=h[a.nodeName];e&&(b.size=e)},f("color","color"),f("face","font",w),f("align","align",l),f("size","size",function(b){return a[b]||10})],u={};"BR P H1 H2 H3 H4 H5".split(" ").forEach(function(a){u[a]=!0});d.parse=function(a,
b){function e(a,c){if(3==a.nodeType)l(a.nodeValue,c);else if(void 0!=a){c=Object.create(c);var d=a.attributes["class"];d&&d.value.split(" ").forEach(function(a){(a=b[a])&&Object.keys(a).forEach(function(b){c[b]=a[b]})});y.forEach(function(b){b(a,c)});if(a.childNodes)for(d=0;d<a.childNodes.length;d++)e(a.childNodes[d],c);u[a.nodeName]&&(p.submit(Object.create(c,{text:{value:"\n"}})),h=!0)}}var d=a;"string"===typeof d&&(d=document.createElement("div"),d.innerHTML=a);var g=[],h=!0,p=m(c.consolidate()).into(g),
l=function(a,b){a=a.replace(/\n+\s*/g," ");var e=a.length;a=a.replace(/^\s+/,"");h?h=!1:e!==a.length&&(a=" "+a);e=a.length;a=a.replace(/\s+$/,"");e!==a.length&&(h=!0,a+=" ");p.submit(Object.create(b,{text:{value:a}}))};e(d,{});return g}},"line.js":function(d,k,f){var c=f("./positionedword"),m=f("./rect");d=f("./node");f("./runs");var g=d.derive({bounds:function(b){if(b){b=this.first().bounds();var e=this.last().bounds();return m(b.l,this.baseline-this.ascent,e.l+e.w-b.l,this.ascent+this.descent)}return m(this.left,
this.baseline-this.ascent,this.width,this.ascent+this.descent)},parent:function(){return this.doc},children:function(){return this.positionedWords},type:"line"});k.exports=function(b,e,a,d,l,f,h,m){var k=h[0].align(),q=Object.create(g,{doc:{value:b},left:{value:e},width:{value:a},baseline:{value:d},ascent:{value:l},descent:{value:f},ordinal:{value:m},align:{value:k}}),r=0;h.forEach(function(a){r+=a.width});var r=r-h[h.length-1].space.width,t=0,n=0;if(r<a)switch(k){case "right":t=a-r;break;case "center":t=
(a-r)/2;break;case "justify":1<h.length&&!h[h.length-1].isNewLine()&&(n=(a-r)/(h.length-1))}Object.defineProperty(q,"positionedWords",{value:h.map(function(a){var b=t;t+=a.width+n;var e=m;m+=a.text.length+a.space.length;return c(a,q,b,e,a.width+n)})});Object.defineProperty(q,"actualWidth",{value:r});Object.defineProperty(q,"length",{value:m-q.ordinal});return q}},"node.js":function(d,k,f){f("per");f("./runs");var c=f("./rect"),m=f("./util");d.prototype={children:function(){return[]},parent:function(){return null},
first:function(){return this.children()[0]},last:function(){return this.children()[this.children().length-1]},next:function(){for(var b=this;;){var e=b.parent();if(!e)return null;var a=e.children();if(b=a[a.indexOf(b)+1]){for(;;){e=b.first();if(!e)break;b=e}return b}b=e}},previous:function(){var b=this.parent();if(!b)return null;var e=b.children();return(e=e[e.indexOf(this)-1])?e:(b=b.previous())?b.last():null},byOrdinal:function(b){var e=null;return this.children().some(function(a){if(b>=a.ordinal&&
b<a.ordinal+a.length&&(e=a.byOrdinal(b)))return!0})?e:this},byCoordinate:function(b,e){var a;this.children().some(function(c){if(c.bounds().contains(b,e)&&(a=c.byCoordinate(b,e)))return!0});if(!a){for(a=this.last();a;){var c=a.last();if(!c)break;a=c}(c=a.next())&&c.block&&(a=c)}return a},draw:function(b,e){this.children().forEach(function(a){a.draw(b,e)})},parentOfType:function(b){var e=this.parent();return e&&(e.type===b?e:e.parentOfType(b))},bounds:function(){var b=this._left,e=this._top,a=0,d=
0,g=function(a,b){return isNaN(a)?b:Math.min(a,b)},f=function(a,b){return isNaN(a)?b:Math.max(a,b)};this.children().forEach(function(c){c=c.bounds();b=g(b,c.l);e=g(e,c.t);a=f(a,c.l+c.w);d=f(d,c.t+c.h)});return c(b,e,a-b,d-e)}};d.derive=function(b){return m.derive(d.prototype,b)};var g=d.derive({children:function(){return this._children},parent:function(){return this._parent},finalize:function(b,e){var a=Number.MAX_VALUE,c=0;this._children.forEach(function(b){a=Math.min(a,b.ordinal);c=Math.max(c,b.ordinal+
b.length)});Object.defineProperty(this,"ordinal",{value:a-(b||0)});Object.defineProperty(this,"length",{value:(e||0)+c-a})}});d.generic=function(b,e,a,c){return Object.create(g,{type:{value:b},_children:{value:[]},_parent:{value:e},_left:{value:"number"===typeof a?a:Number.MAX_VALUE},_top:{value:"number"===typeof c?c:Number.MAX_VALUE}})}},"part.js":function(d,k,f){var c=f("./text"),m={measure:function(b){var e=e.measure("?",b);return{width:e.width+4,ascent:e.width+2,descent:e.width+2}},draw:function(b,
e,a,c,d,g){b.fillStyle="silver";b.fillRect(e,a-d,c,d+g);b.strokeRect(e,a-d,c,d+g);b.fillStyle="black";b.fillText("?",e+2,a)}},g={draw:function(b,e,a){"string"===typeof this.run.text?c.draw(b,this.run.text,this.run,e,a,this.width,this.ascent,this.descent):this.code&&this.code.draw&&(b.save(),this.code.draw(b,e,a,this.width,this.ascent,this.descent,this.run),b.restore())}};k.exports=function(b,e){var a,d,f;"string"===typeof b.text?(d=1===b.text.length&&"\n"===b.text[0],a=c.measure(d?c.nbsp:b.text,b)):
(f=e(b.text)||m,a=f.measure?f.measure(b):{width:0,ascent:0,descent:0});a=Object.create(g,{run:{value:b},isNewLine:{value:d},width:{value:d?0:a.width},ascent:{value:a.ascent},descent:{value:a.descent}});f&&Object.defineProperty(a,"code",{value:f});return a}},"positionedword.js":function(d,k,f){var c=f("./rect"),m=f("./part"),g=f("./text");d=f("./node");f("./word");var b=f("./runs"),e=d.derive({bounds:function(){var a=this.word.bounds(),b=this.word.word.isNewLine()?g.measure(g.enter,this.word.word.run).width:
this.width||this.part.width;return c(a.l+this.left,a.t,b,a.h)},parent:function(){return this.word},byOrdinal:function(){return this},byCoordinate:function(a,b){return a<=this.bounds().center().x?this:this.next()},type:"character"}),a=d.derive({draw:function(a){this.word.draw(a,this.line.left+this.left,this.line.baseline)},bounds:function(){return c(this.line.left+this.left,this.line.baseline-this.line.ascent,this.word.isNewLine()?g.measure(g.enter,this.word.run).width:this.width,this.line.ascent+
this.line.descent)},parts:function(a){this.word.text.parts.some(a)||this.word.space.parts.some(a)},realiseCharacters:function(){if(!this._characters){var a=[],c=0,d=this,g=this.ordinal,f=this.parentOfType("document").codes;this.parts(function(k){b.pieceCharacters(function(b){var u=Object.create(k.run);u.text=b;b=m(u,f);a.push(Object.create(e,{left:{value:c},part:{value:b},word:{value:d},ordinal:{value:g},length:{value:1}}));c+=b.width;g++},k.run.text)});var k=a[a.length-1];k&&(Object.defineProperty(k,
"width",{value:this.width-k.left}),(this.word.isNewLine()||this.word.code()&&this.word.code().eof)&&Object.defineProperty(k,"newLine",{value:!0}));this._characters=a}},children:function(){this.realiseCharacters();return this._characters},parent:function(){return this.line},type:"word"});k.exports=function(b,e,c,d,g){return Object.create(a,{word:{value:b},line:{value:e},left:{value:c},width:{value:g},ordinal:{value:d},length:{value:b.text.length+b.space.length}})}},"range.js":function(d,k,f){function c(b,
e,a){this.doc=b;this.start=e;this.end=a;e>a&&(this.start=a,this.end=e)}var m=f("per"),g=f("./runs");c.prototype.parts=function(b,e){e=e||this.doc.children();var a=this;e.some(function(e){if(e.ordinal+e.length<=a.start)return!1;if(e.ordinal>=a.end)return!0;e.ordinal>=a.start&&e.ordinal+e.length<=a.end?b(e):a.parts(b,e.children())})};c.prototype.clear=function(){return this.setText([])};c.prototype.setText=function(b){return this.doc.splice(this.start,this.end,b)};c.prototype.runs=function(b){this.doc.runs(b,
this)};c.prototype.plainText=function(){return m(this.runs,this).map(g.getPlainText).all().join("")};c.prototype.save=function(){return m(this.runs,this).per(g.consolidate()).all()};c.prototype.getFormatting=function(){if(this.start===this.end){var b=this.start;0<b&&b--;this.start=b;this.end=b+1}return m(this.runs,this).reduce(g.merge).last()||g.defaultFormatting};c.prototype.setFormatting=function(b,e){var a=this;"align"===b&&(a=a.doc.paragraphRange(a.start,a.end));"color"===b&&"string"==typeof e&&
(e=[e,255]);if(a.start===a.end)a.doc.modifyInsertFormatting(b,e);else{var c=a.save(),d={};d[b]=e;g.format(c,d);a.setText(c)}};k.exports=function(b,e,a){return new c(b,e,a)}},"rect.js":function(d,k,f){var c={contains:function(c,b){return c>=this.l&&c<this.l+this.w&&b>=this.t&&b<this.t+this.h},stroke:function(c){c.strokeRect(this.l,this.t,this.w,this.h)},fill:function(c){c.fillRect(this.l,this.t,this.w,this.h)},offset:function(c,b){return m(this.l+c,this.t+b,this.w,this.h)},equals:function(c){return this.l===
c.l&&this.t===c.t&&this.w===c.w&&this.h===c.h},center:function(){return{x:this.l+this.w/2,y:this.t+this.h/2}}},m=k.exports=function(d,b,e,a){return Object.create(c,{l:{value:d},t:{value:b},w:{value:e},h:{value:a},r:{value:d+e},b:{value:b+a}})}},"runs.js":function(d,k,f){d.formattingKeys="bold italic underline strikeout color font size align script".split(" ");d.defaultFormatting={size:14,newBoxSize:14,font:"sans-serif",color:["#000000",255],bold:!1,italic:!1,underline:!1,strikeout:!1,align:"left",
script:"normal"};d.resolveKey=function(c,f){return f in c?c[f]:d.defaultFormatting[f]};d.sameFormatting=function(c,f){return d.formattingKeys.every(function(g){return _.isEqual(d.resolveKey(c,g),d.resolveKey(f,g))})};d.clone=function(c){var f={text:c.text};d.formattingKeys.forEach(function(g){var b=c[g];b&&b!=d.defaultFormatting[g]&&(f[g]=b)});return f};d.multipleValues={};d.merge=function(c,f){if(1===arguments.length)return Array.isArray(c)?c.reduce(d.merge):c;if(2<arguments.length)return d.merge(Array.prototype.slice.call(arguments,
0));var g={};d.formattingKeys.forEach(function(b){if(b in c||b in f)g[b]=c[b]===f[b]?c[b]:d.multipleValues});return g};d.format=function(c,f){Array.isArray(c)?c.forEach(function(c){d.format(c,f)}):Object.keys(f).forEach(function(g){f[g]!==d.multipleValues&&(c[g]=f[g])})};d.consolidate=function(){var c;return function(f,g){c&&d.sameFormatting(c,g)&&"string"==typeof c.text&&"string"==typeof g.text?c.text+=g.text:(c=d.clone(g),f(c))}};d.getPlainText=function(c){if("string"===typeof c.text)return c.text;
if(Array.isArray(c.text)){var f=[];c.text.forEach(function(c){f.push(d.getPiecePlainText(c))});return f.join("")}return"_"};d.getPieceLength=function(c){return c.length||1};d.getPiecePlainText=function(c){return c.length?c:"_"};d.getTextLength=function(c){if("string"===typeof c)return c.length;if(Array.isArray(c)){var f=0;c.forEach(function(c){f+=d.getPieceLength(c)});return f}return 1};d.getSubText=function(c,f,g,b){if(0!==b)if("string"===typeof f)c(f.substr(g,b));else if(Array.isArray(f)){var e=
0;f.some(function(a){if(0>=b)return!0;var f=d.getPieceLength(a);e+f>g&&(1===f?(c(a),--b):(a=a.substr(Math.max(0,g-e),b),c(a),b-=a.length));e+=f})}else c(f)};d.getTextChar=function(c,f){var g;d.getSubText(function(b){g=b},c,f,1);return g};d.pieceCharacters=function(c,d){if("string"===typeof d)for(var g=0;g<d.length;g++)c(d[g]);else c(d)}},"split.js":function(d,k,f){k.exports=function(c){var d=null,g=null,b=!0;return function(e,a){var f;if(null===a["char"])f=!0;else if(b&&(f=!0,b=!1),"string"===typeof a["char"])switch(a["char"]){case " ":g||
(g=a);break;case "\n":b=f=!0;break;default:g&&(f=!0)}else{var l=c(a["char"]);if(l.block||l.eof)b=f=!0}if(f){if(d&&!d.equals(a)){if(!1===e({text:d,spaces:g||a,end:a}))return!1;g=null}null===a["char"]&&e(null);d=a}}}},"text.js":function(d,k,f){var c=f("./runs"),m=d.getFontString=function(b){var a=b&&b.size||c.defaultFormatting.size;if(b)switch(b.script){case "super":case "sub":a*=.8}return(b&&b.italic?"italic ":"")+(b&&b.bold?"bold ":"")+" "+a+"pt "+(b&&b.font||c.defaultFormatting.font)};d.applyRunStyle=
function(b,a){b.fillStyle=a&&a.color&&a.color[0]||c.defaultFormatting.color[0];b.font=m(a)};d.prepareContext=function(b){b.textAlign="left";b.textBaseline="alphabetic"};d.getRunStyle=function(b){var a=["font: ",m(b),"; color: ",b&&b.color&&b.color[0]||c.defaultFormatting.color[0]];if(b)switch(b.script){case "super":a.push("; vertical-align: super");break;case "sub":a.push("; vertical-align: sub")}return a.join("")};var g=d.nbsp=String.fromCharCode(160);d.enter=g;var b=d.measureText=function(b,a){var c,
d,f;c=document.createElement("span");d=document.createElement("div");f=document.createElement("div");d.style.display="inline-block";d.style.width="1px";d.style.height="0";f.style.visibility="hidden";f.style.position="absolute";f.style.top="0";f.style.left="0";f.style.width="500px";f.style.height="200px";f.appendChild(c);f.appendChild(d);document.body.appendChild(f);try{c.setAttribute("style",a);c.innerHTML="";c.appendChild(document.createTextNode(b.replace(/\s/g,g)));var h={};d.style.verticalAlign=
"baseline";h.ascent=d.offsetTop-c.offsetTop;d.style.verticalAlign="bottom";h.height=d.offsetTop-c.offsetTop;h.descent=h.height-h.ascent;h.width=c.offsetWidth}finally{f.parentNode.removeChild(f)}return h};k=d.createCachedMeasureText=function(){var c={};return function(a,d){var f=d+"<>!&%"+a,g=c[f];g||(c[f]=g=b(a,d));return g}};d.cachedMeasureText=k();d.measure=function(b,a){return d.cachedMeasureText(b,d.getRunStyle(a))};d.draw=function(b,a,c,f,g,h,k,m){d.prepareContext(b);d.applyRunStyle(b,c);switch(c.script){case "super":g-=
1/3*k;break;case "sub":g+=m/2}b.fillText("\n"===a?d.enter:a,f,g);c.underline&&b.fillRect(f,1+g,h,1);c.strikeout&&b.fillRect(f,1+g-k/2,h,1)}},"util.js":function(d,k,f){d.event=function(){var c=[],d=function(d){c.push(d)};d.fire=function(){var d=Array.prototype.slice.call(arguments,0);c.forEach(function(b){b.apply(null,d)})};return d};d.derive=function(c,d){var f={};Object.keys(d).forEach(function(b){f[b]={value:d[b]}});return Object.create(c,f)}},"word.js":function(d,k,f){var c=f("per"),m=f("./part"),
g=f("./runs"),b={isNewLine:function(){return 1==this.text.parts.length&&this.text.parts[0].isNewLine},code:function(){return 1==this.text.parts.length&&this.text.parts[0].code},codeFormatting:function(){return 1==this.text.parts.length&&this.text.parts[0].run},draw:function(a,b,d){c(this.text.parts).concat(this.space.parts).forEach(function(c){c.draw(a,b,d);b+=c.width})},plainText:function(){return this.text.plainText+this.space.plainText},align:function(){var a=this.text.parts[0];return a?a.run.align:
"left"},runs:function(a,b){var c=b&&b.start||0,d=b&&b.end;"number"!==typeof d&&(d=Number.MAX_VALUE);[this.text,this.space].forEach(function(b){b.parts.some(function(b){if(c>=d||0>=d)return!0;var e=b.run;b=e.text;if("string"===typeof b){if(0>=c&&d>=b.length)a(e);else if(c<b.length){var e=Object.create(e),f=Math.max(0,c);e.text=b.substr(f,Math.min(b.length,d-f));a(e)}c-=b.length;d-=b.length}else 0>=c&&1<=d&&a(e),c--,d--})})}},e=function(a,b){var d={parts:c(a).map(function(a){return m(a,b)}).all(),ascent:0,
descent:0,width:0,length:0,plainText:""};d.parts.forEach(function(a){d.ascent=Math.max(d.ascent,a.ascent);d.descent=Math.max(d.descent,a.descent);d.width+=a.width;d.length+=g.getPieceLength(a.run.text);d.plainText+=g.getPiecePlainText(a.run.text)});return d};k.exports=function(a,c){var d,f;a?(d=a.text.cut(a.spaces),f=a.spaces.cut(a.end)):(d=[{text:"\n"}],f=[]);d=e(d,c);f=e(f,c);d=Object.create(b,{text:{value:d},space:{value:f},ascent:{value:Math.max(d.ascent,f.ascent)},descent:{value:Math.max(d.descent,
f.descent)},width:{value:d.width+f.width,configurable:!0},length:{value:d.length+f.length}});a||Object.defineProperty(d,"eof",{value:!0});return d}},"wrap.js":function(d,k,f){var c=f("./line");k.exports=function(d,f,b,e,a,k,l,w){var h=[],y=0,u=l||0,q=w||0,r,t=0,n=f,x=function(a,b){h.push(a);y+=a.width;u=Math.max(u,a.ascent);q=Math.max(q,a.descent);a.isNewLine()&&(v(b),t=a.ascent+a.descent)},v=function(f){if(!r&&0!==h.length){var g=c(a,d,b,n+u,u,q,h,e);e+=g.length;r=f(g);n+=u+q;y=u=q=h.length=0}},
z=null;return function(c,l){if(z){t=0;var q=z(l);q&&(z=null,e+=q.length,n+=q.bounds().h,Object.defineProperty(q,"block",{value:!0}),c(q))}else(q=l.code())&&q.block?(h.length?v(c):n+=t,z=q.block(d,n,b,e,a,l.codeFormatting()),t=0):q&&q.eof||l.eof?((!q||k&&k(q))&&x(l,c),h.length?(v(c),c(n-f)):c(n+t-f),r=!0):(t=0,h.length&&y+l.text.width>b&&v(c),x(l,c));return r}}}}},per:{":mainpath:":"per.js","per.js":function(d,k,f){(function(c){function d(a,b){return"function"!==typeof a?Array.isArray(a)?function(b){return a.some(b)}:
function(b){return b(a)}:b?function(c,d){a.call(b,c,d)}:a}function f(a,b){this.forEach=d(a,b)}function b(a,b){a(b)}function e(a,c){return 0===arguments.length?new f(b):a&&a instanceof f?a:new f(a,c)}function a(a){return"string"===typeof a?new Function("x","return "+a):a}function k(a,b){var c=a[b];return"function"===typeof c?c:function(c){a[b]=c}}function l(){}function w(a){return!!a}function h(a,b){return Math.min(a,b)}function y(a,b){return Math.max(a,b)}function u(a,b){return a+b}function q(a,b){return!(!a||
!b)}function r(a,b){return!(!a&&!b)}function t(a){return!a}f.prototype.per=function(a,b){var c=this.forEach,f=d(a&&a.forEach||a,b);return e(function(a,b){return c(function(b){return f(a,b)},b)})};f.prototype.map=function(b){b=a(b);return this.per(function(a,c){return a(b(c))})};f.prototype.filter=function(b){b=a(b);return this.per(function(a,c){if(b(c))return a(c)})};f.prototype.concat=function(a,b){a=a instanceof f?a.forEach:d(a,b);var c=this.forEach;return e(function(b,d){c(b,d);a(b,d)})};f.prototype.skip=
function(a){return this.per(function(b,c){return 0<a?(a--,!1):b(c)})};f.prototype.take=function(a){return this.per(function(b,c){if(0>=a)return!0;a--;return b(c)})};f.prototype.listen=function(a){return this.per(function(b,c){return a(c)?!0:b(c)})};f.prototype.flatten=function(){return this.per(function(a,b){return Array.isArray(b)?b.some(function(b){return a(b)}):a(b)})};f.prototype.reduce=function(a,b){var c=b,d=2==arguments.length;return this.per(function(b,e){c=d?a(c,e):e;b(c);d=!0})};f.prototype.multicast=
function(a){1!==arguments.length&&(a=Array.prototype.slice.call(arguments,0));a=a.map(function(a){return"function"===typeof a?a:a instanceof f?a.forEach:l});return this.listen(function(b){var c=!0;a.forEach(function(a){a(l,b)||(c=!1)});return c})};f.prototype.into=function(a,b){if(!Array.isArray(a))throw Error("into expects an array");b="number"!=typeof b?Number.MAX_VALUE:b;return this.listen(function(c){if(0>=b)return!0;a.push(c);b--})};f.prototype.monitor=function(a){var b=0,c=k(a,"count"),d=k(a,
"first"),e=k(a,"last"),f=a.limit;"number"!=typeof f&&(f=Number.MAX_VALUE);return 1>f?this:this.listen(function(a){0===b&&d(a);b++;c(b);e(a);if(b>=f)return!0})};f.prototype.submit=function(a){return this.forEach(l,a)};f.prototype.all=function(){var a=[];this.into(a).submit();return a};f.prototype.first=function(){var a={limit:1};this.monitor(a).submit();return 0<a.count?a.first:void 0};f.prototype.last=function(){var a={};this.monitor(a).submit();return 0<a.count?a.last:void 0};f.prototype.truthy=
function(){return this.filter(w)};f.prototype.min=function(){return this.reduce(h,Number.MAX_VALUE)};f.prototype.max=function(){return this.reduce(y,Number.MIN_VALUE)};f.prototype.sum=function(){return this.reduce(u,0)};f.prototype.and=function(){return this.reduce(q,!0)};f.prototype.or=function(){return this.reduce(r,!1)};f.prototype.not=function(){return this.map(t)};e.pulse=function(a){var b=0;return e(function(c){function d(){!0!==c(b++)&&setTimeout(d,a)}d()})};c(e)})(function(c){"undefined"===
typeof d?this.per=c:k.exports=c})}}})("carota/src/carota")})();
