$(document).ready(function(){Squire.prototype.testPresenceinSelection=function(n,z,f,l){var d=this.getPath();f=l.test(d)|this.hasFormat(f);return n==z&&f?!0:!1};SquireUI=function(n){"undefined"==typeof n.buildPath&&(n.buildPath="build/");var z;if(n.replace)z=$(n.replace).parent(),$(n.replace).remove();else if(n.div)z=$(n.div);else throw Error("No element was defined for the editor to inject to.");var f=document.createElement("iframe"),l=document.createElement("div");l.className="Squire-UI";f.height=
n.height;$(l).load(n.buildPath+"Squire-UI.html",function(){this.linkDrop=new Drop({target:$("#makeLink").first()[0],content:$("#drop-link").html(),position:"bottom center",openOn:"click"});this.linkDrop.on("open",function(){$(".quit").click(function(){$(this).parent().parent().removeClass("drop-open")});$(".submitLink").click(function(){f.contentWindow.editor.makeLink($(this).parent().children("#url").first().val());$(this).parent().parent().removeClass("drop-open");$(this).parent().children("#url").attr("value",
"")})});this.imageDrop=new Drop({target:$("#insertImage").first()[0],content:$("#drop-image").html(),position:"bottom center",openOn:"click"});this.imageDrop.on("open",function(){$(".quit").unbind().click(function(){$(this).parent().parent().removeClass("drop-open")});$(".sumbitImageURL").unbind().click(function(){console.log("Passed through .sumbitImageURL");var d=f.contentWindow.editor;url=$(this).parent().children("#imageUrl").first()[0];d.insertImage(url.value);$(this).parent().parent().removeClass("drop-open");
$(this).parent().children("#imageUrl").attr("value","")})});this.fontDrop=new Drop({target:$("#selectFont").first()[0],content:$("#drop-font").html(),position:"bottom center",openOn:"click"});this.fontDrop.on("open",function(){$(".quit").click(function(){$(this).parent().parent().removeClass("drop-open")});$(".submitFont").unbind().click(function(){var d=f.contentWindow.editor,l=$("select#fontSelect option:selected").last().data("fonts"),t=$("select#textSelector option:selected").last().data("size")+
"px";d.setFontSize(t);try{d.setFontFace(l)}catch(y){alert("Please make a selection of text.")}finally{$(this).parent().parent().removeClass("drop-open")}})});$(".item").click(function(){var d=$(this).parents(".Squire-UI").next("iframe").first()[0].contentWindow.editor,f=$(this).data("action");test={value:$(this).data("action"),testBold:d.testPresenceinSelection("bold",f,"B",/>B\b/),testItalic:d.testPresenceinSelection("italic",f,"I",/>I\b/),testUnderline:d.testPresenceinSelection("underline",f,"U",
/>U\b/),testOrderedList:d.testPresenceinSelection("makeOrderedList",f,"OL",/>OL\b/),testLink:d.testPresenceinSelection("makeLink",f,"A",/>A\b/),testQuote:d.testPresenceinSelection("increaseQuoteLevel",f,"blockquote",/>blockquote\b/),isNotValue:function(d){return d==f&&""!==this.value}};d.alignRight=function(){d.setTextAlignment("right")};d.alignCenter=function(){d.setTextAlignment("center")};d.alignLeft=function(){d.setTextAlignment("left")};d.alignJustify=function(){d.setTextAlignment("justify")};
d.makeHeading=function(){d.setFontSize("2em");d.bold()};test.testBold|test.testItalic|test.testUnderline|test.testOrderedList|test.testLink|test.testQuote?(test.testBold&&d.removeBold(),test.testItalic&&d.removeItalic(),test.testUnderline&&d.removeUnderline(),test.testLink&&d.removeLink(),test.testOrderedList&&d.removeList(),test.testQuote&&d.decreaseQuoteLevel()):test.isNotValue("makeLink")|test.isNotValue("insertImage")|test.isNotValue("selectFont")||(d[f](),d.focus())})});$(z).append(l);$(z).append(f);
n=document.createElement("style");n.innerHTML="blockquote { border-left: 3px green solid; padding-left: 5px; }";f.contentWindow.editor=new Squire(f.contentWindow.document);f.addEventListener("load",function(){f.contentWindow.editor=new Squire(f.contentWindow.document)});f.contentWindow.document.head.appendChild(n);return f.contentWindow.editor}});
!function(n,z){"function"==typeof define&&define.amd?define(z):"object"==typeof exports?module.exports=z(require,exports,module):n.Tether=z()}(this,function(){return function(){var n,z,f,l,d,F,t,y,h,e,C={}.hasOwnProperty,r=[].indexOf||function(c){for(var a=0,b=this.length;b>a;a++)if(a in this&&this[a]===c)return a;return-1},u=[].slice;null==this.Tether&&(this.Tether={modules:[]});h=function(){var c;return c=0,function(){return c++}}();e={};F=function(c){var a,b,q;if(q=c._tetherZeroElement,null==q&&
(q=c.createElement("div"),q.setAttribute("data-tether-id",h()),d(q.style,{top:0,left:0,position:"absolute"}),c.body.appendChild(q),c._tetherZeroElement=q),a=q.getAttribute("data-tether-id"),null==e[a]){e[a]={};q=q.getBoundingClientRect();for(b in q)c=q[b],e[a][b]=c;f(function(){return e[a]=void 0})}return e[a]};d=function(c){var a,b,q,m,d,g;null==c&&(c={});a=[];Array.prototype.push.apply(a,arguments);g=a.slice(1);m=0;for(d=g.length;d>m;m++)if(a=g[m])for(b in a)C.call(a,b)&&(q=a[b],c[b]=q);return c};
y=function(c,a){var b,q,m,d,g;if(null!=c.classList){d=a.split(" ");g=[];q=0;for(m=d.length;m>q;q++)b=d[q],b.trim()&&g.push(c.classList.remove(b));return g}return c.className=c.className.replace(new RegExp("(^| )"+a.split(" ").join("|")+"( |$)","gi")," ")};z=function(c,a){var b,q,d,e,g;if(null!=c.classList){e=a.split(" ");g=[];q=0;for(d=e.length;d>q;q++)b=e[q],b.trim()&&g.push(c.classList.add(b));return g}return y(c,a),c.className+=" "+a};t=function(c,a){return null!=c.classList?c.classList.contains(a):
(new RegExp("(^| )"+a+"( |$)","gi")).test(c.className)};l=[];f=function(c){return l.push(c)};n=function(){function c(){}return c.prototype.on=function(a,b,c,d){var e;return null==d&&(d=!1),null==this.bindings&&(this.bindings={}),null==(e=this.bindings)[a]&&(e[a]=[]),this.bindings[a].push({handler:b,ctx:c,once:d})},c.prototype.once=function(a,b,c){return this.on(a,b,c,!0)},c.prototype.off=function(a,b){var c,d;if(null!=(null!=(c=this.bindings)?c[a]:void 0)){if(null==b)return delete this.bindings[a];
c=0;for(d=[];c<this.bindings[a].length;)d.push(this.bindings[a][c].handler===b?this.bindings[a].splice(c,1):c++);return d}},c.prototype.trigger=function(){var a,b,c,d,e,g,f;if(c=arguments[0],a=2<=arguments.length?u.call(arguments,1):[],null!=(b=this.bindings)?b[c]:void 0){e=0;for(f=[];e<this.bindings[c].length;)g=this.bindings[c][e],d=g.handler,b=g.ctx,g=g.once,d.apply(null!=b?b:this,a),f.push(g?this.bindings[c].splice(e,1):e++);return f}},c}();this.Tether.Utils={getScrollParent:function(c){var a,
b,d;if(a=getComputedStyle(c).position,"fixed"===a)return c;for(;c=c.parentNode;){try{b=getComputedStyle(c)}catch(e){}if(null==b||/(auto|scroll)/.test(b.overflow+b["overflow-y"]+b["overflow-x"])&&("absolute"!==a||"relative"===(d=b.position)||"absolute"===d||"fixed"===d))return c}return document.body},getBounds:function(c){var a,b,d,e,f,g;c===document?(b=document,c=document.documentElement):b=c.ownerDocument;d=b.documentElement;a={};g=c.getBoundingClientRect();for(e in g)c=g[e],a[e]=c;return f=F(b),
a.top-=f.top,a.left-=f.left,null==a.width&&(a.width=document.body.scrollWidth-a.left-a.right),null==a.height&&(a.height=document.body.scrollHeight-a.top-a.bottom),a.top-=d.clientTop,a.left-=d.clientLeft,a.right=b.body.clientWidth-a.width-a.left,a.bottom=b.body.clientHeight-a.height-a.top,a},getOffsetParent:function(c){return c.offsetParent||document.documentElement},extend:d,addClass:z,removeClass:y,hasClass:t,updateClasses:function(c,a,b){var d,e,f;e=0;for(f=b.length;f>e;e++)d=b[e],0>r.call(a,d)&&
t(c,d)&&y(c,d);f=[];b=0;for(e=a.length;e>b;b++)d=a[b],f.push(t(c,d)?void 0:z(c,d));return f},defer:f,flush:function(){var c,a;for(a=[];c=l.pop();)a.push(c());return a},uniqueId:h,Evented:n,getScrollBarSize:function(){var c,a,b,e,f;return c=document.createElement("div"),c.style.width="100%",c.style.height="200px",a=document.createElement("div"),d(a.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),a.appendChild(c),document.body.appendChild(a),
e=c.offsetWidth,a.style.overflow="scroll",f=c.offsetWidth,e===f&&(f=a.clientWidth),document.body.removeChild(a),b=e-f,{width:b,height:b}}}}.call(this),function(){var n,z,f,l,d,F,t,y,h,e,C,r,u,c,a,b,q,m,G,g,I,D,k,B,v,E,x=[].slice,A=function(a,p){return function(){return a.apply(p,arguments)}};if(null==this.Tether)throw Error("You must include the utils.js file before tether.js");l=this.Tether;E=l.Utils;a=E.getScrollParent;r=E.getBounds;u=E.getOffsetParent;e=E.extend;d=E.addClass;I=E.removeClass;B=
E.updateClasses;h=E.defer;C=E.flush;c=E.getScrollBarSize;v=function(a,p,w){return null==w&&(w=1),a+w>=p&&p>=a-w};k=function(){var a,p,w,c,b;a=document.createElement("div");b=["transform","webkitTransform","OTransform","MozTransform","msTransform"];w=0;for(c=b.length;c>w;w++)if(p=b[w],void 0!==a.style[p])return p}();D=[];g=function(){var a,p,w;p=0;for(w=D.length;w>p;p++)a=D[p],a.position(!1);return C()};b=function(){var a;return null!=(a="undefined"!=typeof performance&&null!==performance&&"function"==
typeof performance.now?performance.now():void 0)?a:+new Date};(function(){var a,p,w,c,d,e,f,H,k;c=w=p=null;d=function(){if(null!=w&&16<w)return w=Math.min(w-16,250),void(c=setTimeout(d,250));if(!(null!=p&&10>b()-p))return null!=c&&(clearTimeout(c),c=null),p=b(),g(),w=b()-p};H=["resize","scroll","touchmove"];k=[];e=0;for(f=H.length;f>e;e++)a=H[e],k.push(window.addEventListener(a,d));return k})();n={center:"center",left:"right",right:"left"};z={middle:"middle",top:"bottom",bottom:"top"};f={top:0,left:0,
middle:"50%",center:"50%",bottom:"100%",right:"100%"};y=function(a,p){var w,c;return w=a.left,c=a.top,"auto"===w&&(w=n[p.left]),"auto"===c&&(c=z[p.top]),{left:w,top:c}};t=function(a){var p,c;return{left:null!=(p=f[a.left])?p:a.left,top:null!=(c=f[a.top])?c:a.top}};F=function(){var a,p,c,b,d,e;p=1<=arguments.length?x.call(arguments,0):[];c={top:0,left:0};d=0;for(e=p.length;e>d;d++)a=p[d],b=a.top,a=a.left,"string"==typeof b&&(b=parseFloat(b,10)),"string"==typeof a&&(a=parseFloat(a,10)),c.top+=b,c.left+=
a;return c};q=function(a,p){return"string"==typeof a.left&&-1!==a.left.indexOf("%")&&(a.left=parseFloat(a.left,10)/100*p.width),"string"==typeof a.top&&-1!==a.top.indexOf("%")&&(a.top=parseFloat(a.top,10)/100*p.height),a};m=G=function(a){var p,c,b;return b=a.split(" "),c=b[0],p=b[1],{top:c,left:p}};E=function(){function b(a){this.position=A(this.position,this);var c,d,e,f;D.push(this);this.history=[];this.setOptions(a,!1);e=l.modules;c=0;for(d=e.length;d>c;c++)a=e[c],null!=(f=a.initialize)&&f.call(this);
this.position()}return b.modules=[],b.prototype.getClass=function(a){var c,b;return null!=(c=this.options.classes)&&c[a]?this.options.classes[a]:!1!==(null!=(b=this.options.classes)?b[a]:void 0)?this.options.classPrefix?""+this.options.classPrefix+"-"+a:a:""},b.prototype.setOptions=function(c,b){var f,k,L,g;this.options=c;null==b&&(b=!0);k=this.options=e({offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"},this.options);this.element=k.element;this.target=k.target;this.targetModifier=
k.targetModifier;"viewport"===this.target?(this.target=document.body,this.targetModifier="visible"):"scroll-handle"===this.target&&(this.target=document.body,this.targetModifier="scroll-handle");g=["element","target"];k=0;for(L=g.length;L>k;k++){if(f=g[k],null==this[f])throw Error("Tether Error: Both element and target must be defined");null!=this[f].jquery?this[f]=this[f][0]:"string"==typeof this[f]&&(this[f]=document.querySelector(this[f]))}if(d(this.element,this.getClass("element")),d(this.target,
this.getClass("target")),!this.options.attachment)throw Error("Tether Error: You must provide an attachment");return this.targetAttachment=m(this.options.targetAttachment),this.attachment=m(this.options.attachment),this.offset=G(this.options.offset),this.targetOffset=G(this.options.targetOffset),null!=this.scrollParent&&this.disable(),this.scrollParent="scroll-handle"===this.targetModifier?this.target:a(this.target),!1!==this.options.enabled?this.enable(b):void 0},b.prototype.getTargetBounds=function(){var a,
c,b,d,e,f,k,g,h;if(null==this.targetModifier)return r(this.target);switch(this.targetModifier){case "visible":return this.target===document.body?{top:pageYOffset,left:pageXOffset,height:innerHeight,width:innerWidth}:(a=r(this.target),e={height:a.height,width:a.width,top:a.top,left:a.left},e.height=Math.min(e.height,a.height-(pageYOffset-a.top)),e.height=Math.min(e.height,a.height-(a.top+a.height-(pageYOffset+innerHeight))),e.height=Math.min(innerHeight,e.height),e.height-=2,e.width=Math.min(e.width,
a.width-(pageXOffset-a.left)),e.width=Math.min(e.width,a.width-(a.left+a.width-(pageXOffset+innerWidth))),e.width=Math.min(innerWidth,e.width),e.width-=2,e.top<pageYOffset&&(e.top=pageYOffset),e.left<pageXOffset&&(e.left=pageXOffset),e);case "scroll-handle":return h=this.target,h===document.body?(h=document.documentElement,a={left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}):a=r(h),g=getComputedStyle(h),b=h.scrollWidth>h.clientWidth||!1||this.target!==document.body,f=0,b&&(f=
15),d=a.height-parseFloat(g.borderTopWidth)-parseFloat(g.borderBottomWidth)-f,e={width:15,height:d/h.scrollHeight*d*.975,left:a.left+a.width-parseFloat(g.borderLeftWidth)-15},c=0,408>d&&this.target===document.body&&(c=-1.1E-4*Math.pow(d,2)-.00727*d+22.58),this.target!==document.body&&(e.height=Math.max(e.height,24)),k=this.target.scrollTop/(h.scrollHeight-d),e.top=k*(d-e.height-c)+a.top+parseFloat(g.borderTopWidth),this.target===document.body&&(e.height=Math.max(e.height,24)),e}},b.prototype.clearCache=
function(){return this._cache={}},b.prototype.cache=function(a,c){return null==this._cache&&(this._cache={}),null==this._cache[a]&&(this._cache[a]=c.call(this)),this._cache[a]},b.prototype.enable=function(a){return null==a&&(a=!0),d(this.target,this.getClass("enabled")),d(this.element,this.getClass("enabled")),this.enabled=!0,this.scrollParent!==document&&this.scrollParent.addEventListener("scroll",this.position),a?this.position():void 0},b.prototype.disable=function(){return I(this.target,this.getClass("enabled")),
I(this.element,this.getClass("enabled")),this.enabled=!1,null!=this.scrollParent?this.scrollParent.removeEventListener("scroll",this.position):void 0},b.prototype.destroy=function(){var a,c,b,d,e;this.disable();e=[];a=b=0;for(d=D.length;d>b;a=++b){if(c=D[a],c===this){D.splice(a,1);break}e.push(void 0)}return e},b.prototype.updateAttachClasses=function(a,c){var b,e,d,f,k,g=this;null==a&&(a=this.attachment);null==c&&(c=this.targetAttachment);d="left top bottom right middle center".split(" ");null!=
(b=this._addAttachClasses)&&b.length&&this._addAttachClasses.splice(0,this._addAttachClasses.length);b=null!=this._addAttachClasses?this._addAttachClasses:this._addAttachClasses=[];a.top&&b.push(""+this.getClass("element-attached")+"-"+a.top);a.left&&b.push(""+this.getClass("element-attached")+"-"+a.left);c.top&&b.push(""+this.getClass("target-attached")+"-"+c.top);c.left&&b.push(""+this.getClass("target-attached")+"-"+c.left);e=[];f=0;for(k=d.length;k>f;f++)b=d[f],e.push(""+this.getClass("element-attached")+
"-"+b);f=0;for(k=d.length;k>f;f++)b=d[f],e.push(""+this.getClass("target-attached")+"-"+b);return h(function(){return null!=g._addAttachClasses?(B(g.element,g._addAttachClasses,e),B(g.target,g._addAttachClasses,e),g._addAttachClasses=void 0):void 0})},b.prototype.position=function(a){var b,e,d,f,k,g,h,x,v,m,D,E,A,n,z,I,J,B,G,U,Q,V,W,X,R=this;if(null==a&&(a=!0),this.enabled){this.clearCache();n=y(this.targetAttachment,this.attachment);this.updateAttachClasses(this.attachment,n);b=this.cache("element-bounds",
function(){return r(R.element)});B=b.width;e=b.height;0===B&&0===e&&null!=this.lastSize?(f=this.lastSize,B=f.width,e=f.height):this.lastSize={width:B,height:e};d=I=this.cache("target-bounds",function(){return R.getTargetBounds()});x=q(t(this.attachment),{width:B,height:e});z=q(t(n),d);f=q(this.offset,{width:B,height:e});k=q(this.targetOffset,d);x=F(x,f);z=F(z,k);d=I.left+z.left-x.left;J=I.top+z.top-x.top;Q=l.modules;G=0;for(U=Q.length;U>G;G++)if(g=Q[G],m=g.position.call(this,{left:d,top:J,targetAttachment:n,
targetPos:I,attachment:this.attachment,elementPos:b,offset:x,targetOffset:z,manualOffset:f,manualTargetOffset:k,scrollbarSize:A}),null!=m&&"object"==typeof m){if(!1===m)return!1;J=m.top;d=m.left}if(h={page:{top:J,left:d},viewport:{top:J-pageYOffset,bottom:pageYOffset-J-e+innerHeight,left:d-pageXOffset,right:pageXOffset-d-B+innerWidth}},document.body.scrollWidth>window.innerWidth&&(A=this.cache("scrollbar-size",c),h.viewport.bottom-=A.height),document.body.scrollHeight>window.innerHeight&&(A=this.cache("scrollbar-size",
c),h.viewport.right-=A.width),(""!==(V=document.body.style.position)&&"static"!==V||""!==(W=document.body.parentElement.style.position)&&"static"!==W)&&(h.page.bottom=document.body.scrollHeight-J-e,h.page.right=document.body.scrollWidth-d-B),!1!==(null!=(X=this.options.optimizations)?X.moveElement:void 0)&&null==this.targetModifier){v=this.cache("target-offsetparent",function(){return u(R.target)});g=this.cache("target-offsetparent-bounds",function(){return r(v)});e=getComputedStyle(v);getComputedStyle(this.element);
b={};B=["Top","Left","Bottom","Right"];A=0;for(n=B.length;n>A;A++)m=B[A],b[m.toLowerCase()]=parseFloat(e["border"+m+"Width"]);g.right=document.body.scrollWidth-g.left-g.width+b.right;g.bottom=document.body.scrollHeight-g.top-g.height+b.bottom;h.page.top>=g.top+b.top&&h.page.bottom>=g.bottom&&h.page.left>=g.left+b.left&&h.page.right>=g.right&&(E=v.scrollTop,D=v.scrollLeft,h.offset={top:h.page.top-g.top+E-b.top,left:h.page.left-g.left+D-b.left})}return this.move(h),this.history.unshift(h),3<this.history.length&&
this.history.pop(),a&&C(),!0}},b.prototype.move=function(a){var b,c,d,f,g,x,m,q,A,l,r,n,C=this;if(null!=this.element.parentNode){x={};for(m in a)for(d in x[m]={},a[m]){c=!1;r=this.history;A=0;for(l=r.length;l>A;A++)if(g=r[A],!v(null!=(n=g[m])?n[d]:void 0,a[m][d])){c=!0;break}c||(x[m][d]=!0)}b={top:"",left:"",right:"",bottom:""};g=function(a,c){var d,e,f;return!1===(null!=(f=C.options.optimizations)?f.gpu:void 0)?(a.top?b.top=""+c.top+"px":b.bottom=""+c.bottom+"px",a.left?b.left=""+c.left+"px":b.right=
""+c.right+"px"):(a.top?(b.top=0,e=c.top):(b.bottom=0,e=-c.bottom),a.left?(b.left=0,d=c.left):(b.right=0,d=-c.right),b[k]="translateX("+Math.round(d)+"px) translateY("+Math.round(e)+"px)","msTransform"!==k?b[k]+=" translateZ(0)":void 0)};c=!1;(x.page.top||x.page.bottom)&&(x.page.left||x.page.right)?(b.position="absolute",g(x.page,a.page)):(x.viewport.top||x.viewport.bottom)&&(x.viewport.left||x.viewport.right)?(b.position="fixed",g(x.viewport,a.viewport)):null!=x.offset&&x.offset.top&&x.offset.left?
(b.position="absolute",f=this.cache("target-offsetparent",function(){return u(C.target)}),u(this.element)!==f&&h(function(){return C.element.parentNode.removeChild(C.element),f.appendChild(C.element)}),g(x.offset,a.offset),c=!0):(b.position="absolute",g({top:!0,left:!0},a.page));c||"BODY"===this.element.parentNode.tagName||(this.element.parentNode.removeChild(this.element),document.body.appendChild(this.element));q={};c=!1;for(d in b)x=b[d],a=this.element.style[d],""===a||""===x||"top"!==d&&"left"!==
d&&"bottom"!==d&&"right"!==d||(a=parseFloat(a),x=parseFloat(x)),a!==x&&(c=!0,q[d]=b[d]);return c?h(function(){return e(C.element.style,q)}):void 0}},b}();l.position=g;this.Tether=e(E,l)}.call(this),function(){var n,z,f,l,d,F,t,y=[].indexOf||function(d){for(var e=0,f=this.length;f>e;e++)if(e in this&&this[e]===d)return e;return-1};t=this.Tether.Utils;d=t.getBounds;f=t.extend;F=t.updateClasses;z=t.defer;n=["left","top","right","bottom"];l=function(f,e){var l,r,u,c,a;if("scrollParent"===e?e=f.scrollParent:
"window"===e&&(e=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]),e===document&&(e=e.documentElement),null!=e.nodeType)for(l=r=d(e),u=getComputedStyle(e),e=[l.left,l.top,r.width+l.left,r.height+l.top],l=c=0,a=n.length;a>c;l=++c)r=n[l],r=r[0].toUpperCase()+r.substr(1),"Top"===r||"Left"===r?e[l]+=parseFloat(u["border"+r+"Width"]):e[l]-=parseFloat(u["border"+r+"Width"]);return e};this.Tether.modules.push({position:function(h){var e,n,r,u,c,a,b,q,m,t,g,I,D,k,B,v,E,x,A,J,p,w,K,
M,L,N,H,P,S,T,O=this;if(p=h.top,m=h.left,E=h.targetAttachment,!this.options.constraints)return!0;w=this.cache("element-bounds",function(){return d(O.element)});h=w.height;w=w.width;0===w&&0===h&&null!=this.lastSize&&(x=this.lastSize,w=x.width,h=x.height);A=this.cache("target-bounds",function(){return O.getTargetBounds()});x=A.height;A=A.width;v={};b={};n=[this.getClass("pinned"),this.getClass("out-of-bounds")];v=this.options.constraints;B=0;for(b=v.length;b>B;B++)q=v[B],q.outOfBoundsClass&&n.push(q.outOfBoundsClass),
q.pinnedClass&&n.push(q.pinnedClass);v=0;for(M=n.length;M>v;v++)for(b=n[v],g=["left","top","right","bottom"],K=0,L=g.length;L>K;K++)B=g[K],n.push(""+b+"-"+B);e=[];v=f({},E);b=f({},this.attachment);L=this.options.constraints;K=0;for(M=L.length;M>K;K++){if(q=L[K],J=q.to,r=q.attachment,D=q.pin,null==r&&(r=""),0<=y.call(r," ")?(P=r.split(" "),a=P[0],c=P[1]):c=a=r,u=l(this,J),("target"===a||"both"===a)&&(p<u[1]&&"top"===v.top&&(p+=x,v.top="bottom"),p+h>u[3]&&"bottom"===v.top&&(p-=x,v.top="top")),"together"===
a&&(p<u[1]&&"top"===v.top&&("bottom"===b.top?(p+=x,v.top="bottom",p+=h,b.top="top"):"top"===b.top&&(p+=x,v.top="bottom",p-=h,b.top="bottom")),p+h>u[3]&&"bottom"===v.top&&("top"===b.top?(p-=x,v.top="top",p-=h,b.top="bottom"):"bottom"===b.top&&(p-=x,v.top="top",p+=h,b.top="top")),"middle"===v.top&&(p+h>u[3]&&"top"===b.top?(p-=h,b.top="bottom"):p<u[1]&&"bottom"===b.top&&(p+=h,b.top="top"))),("target"===c||"both"===c)&&(m<u[0]&&"left"===v.left&&(m+=A,v.left="right"),m+w>u[2]&&"right"===v.left&&(m-=A,
v.left="left")),"together"===c&&(m<u[0]&&"left"===v.left?"right"===b.left?(m+=A,v.left="right",m+=w,b.left="left"):"left"===b.left&&(m+=A,v.left="right",m-=w,b.left="right"):m+w>u[2]&&"right"===v.left?"left"===b.left?(m-=A,v.left="left",m-=w,b.left="right"):"right"===b.left&&(m-=A,v.left="left",m+=w,b.left="left"):"center"===v.left&&(m+w>u[2]&&"left"===b.left?(m-=w,b.left="right"):m<u[0]&&"right"===b.left&&(m+=w,b.left="left"))),("element"===a||"both"===a)&&(p<u[1]&&"bottom"===b.top&&(p+=h,b.top=
"top"),p+h>u[3]&&"top"===b.top&&(p-=h,b.top="bottom")),("element"===c||"both"===c)&&(m<u[0]&&"right"===b.left&&(m+=w,b.left="left"),m+w>u[2]&&"left"===b.left&&(m-=w,b.left="right")),"string"==typeof D?D=function(){var a,b,c,d;c=D.split(",");d=[];b=0;for(a=c.length;a>b;b++)I=c[b],d.push(I.trim());return d}():!0===D&&(D=["top","left","right","bottom"]),D||(D=[]),k=[],t=[],p<u[1]&&(0<=y.call(D,"top")?(p=u[1],k.push("top")):t.push("top")),p+h>u[3]&&(0<=y.call(D,"bottom")?(p=u[3]-h,k.push("bottom")):t.push("bottom")),
m<u[0]&&(0<=y.call(D,"left")?(m=u[0],k.push("left")):t.push("left")),m+w>u[2]&&(0<=y.call(D,"right")?(m=u[2]-w,k.push("right")):t.push("right")),k.length)for(g=null!=(S=this.options.pinnedClass)?S:this.getClass("pinned"),e.push(g),H=0,N=k.length;N>H;H++)B=k[H],e.push(""+g+"-"+B);if(t.length)for(g=null!=(T=this.options.outOfBoundsClass)?T:this.getClass("out-of-bounds"),e.push(g),H=0,N=t.length;N>H;H++)B=t[H],e.push(""+g+"-"+B);(0<=y.call(k,"left")||0<=y.call(k,"right"))&&(b.left=v.left=!1);(0<=y.call(k,
"top")||0<=y.call(k,"bottom"))&&(b.top=v.top=!1);v.top===E.top&&v.left===E.left&&b.top===this.attachment.top&&b.left===this.attachment.left||this.updateAttachClasses(b,v)}return z(function(){return F(O.target,e,n),F(O.element,e,n)}),{top:p,left:m}}})}.call(this),function(){var n,z,f,l;l=this.Tether.Utils;z=l.getBounds;f=l.updateClasses;n=l.defer;this.Tether.modules.push({position:function(d){var l,t,y,h,e,C,r,u,c,a,b,q,m,G=this;if(u=d.top,e=d.left,a=this.cache("element-bounds",function(){return z(G.element)}),
h=a.height,c=a.width,r=this.getTargetBounds(),y=u+h,C=e+c,d=[],u<=r.bottom&&y>=r.top)for(q=["left","right"],c=0,a=q.length;a>c;c++)h=q[c],(b=r[h])!==e&&b!==C||d.push(h);if(e<=r.right&&C>=r.left)for(C=["top","bottom"],e=0,b=C.length;b>e;e++)h=C[e],(m=r[h])!==u&&m!==y||d.push(h);t=[];l=[];y=["left","top","right","bottom"];t.push(this.getClass("abutted"));r=0;for(u=y.length;u>r;r++)h=y[r],t.push(""+this.getClass("abutted")+"-"+h);d.length&&l.push(this.getClass("abutted"));y=0;for(r=d.length;r>y;y++)h=
d[y],l.push(""+this.getClass("abutted")+"-"+h);return n(function(){return f(G.target,l,t),f(G.element,l,t)}),!0}})}.call(this),function(){this.Tether.modules.push({position:function(n){var z,f,l,d,F,t,y;return t=n.top,z=n.left,this.options.shift?(f=function(d){return"function"==typeof d?d.call(this,{top:t,left:z}):d},l=f(this.options.shift),"string"==typeof l?(l=l.split(" "),l[1]||(l[1]=l[0]),F=l[0],d=l[1],F=parseFloat(F,10),d=parseFloat(d,10)):(y=[l.top,l.left],F=y[0],d=y[1]),t+=F,z+=d,{top:t,left:z}):
void 0}})}.call(this),this.Tether});
(function(){var n,z,f,l,d,F,t,y,h,e,C,r,u,c,a,b,q={}.hasOwnProperty,m=function(a,b){function c(){this.constructor=a}for(var d in b)q.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},G=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};t=Tether.Utils;y=t.extend;f=t.addClass;C=t.removeClass;h=t.hasClass;n=t.Evented;t="ontouchstart"in document.documentElement;d=["click"];t&&d.push("touchstart");b={WebkitTransition:"webkitTransitionEnd",
MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"};a="";for(e in b)t=b[e],c=document.createElement("p"),void 0!==c.style[e]&&(a=t);u=function(a){var b,c,d,e;return d=a.split(" "),b=d[0],c=d[1],("left"===b||"right"===b)&&(e=[c,b],b=e[0],c=e[1]),[b,c].join(" ")};z={left:"right",right:"left",top:"bottom",bottom:"top",middle:"middle",center:"center"};l={};r=function(a,b){var c,d;for(d=[];-1!==(c=a.indexOf(b));)d.push(a.splice(c,1));return d};F=function(b){var c,e,k,
q;return null==b&&(b={}),k=function(){return function(a,b,c){c.prototype=a.prototype;c=new c;a=a.apply(c,b);return Object(a)===a?a:c}(c,arguments,function(){})},y(k,{createContext:F,drops:[],defaults:{}}),e={classPrefix:"drop",defaults:{position:"bottom left",openOn:"click",constrainToScrollParent:!0,constrainToWindow:!0,classes:"",remove:!1,tetherOptions:{}}},y(k,e,b),y(k.defaults,e.defaults,b.defaults),null==l[q=k.classPrefix]&&(l[q]=[]),k.updateBodyClasses=function(){var a,b,c,d,e;a=!1;e=l[k.classPrefix];
c=0;for(d=e.length;d>c;c++)if(b=e[c],b.isOpened()){a=!0;break}return a?f(document.body,""+k.classPrefix+"-open"):C(document.body,""+k.classPrefix+"-open")},c=function(c){function e(a){if(this.options=a,this.options=y({},k.defaults,this.options),this.target=this.options.target,null==this.target)throw Error("Drop Error: You must provide a target.");this.options.classes&&f(this.target,this.options.classes);k.drops.push(this);l[k.classPrefix].push(this);this._boundEvents=[];this.setupElements();this.setupEvents();
this.setupTether()}return m(e,c),e.prototype._on=function(a,b,c){return this._boundEvents.push({element:a,event:b,handler:c}),a.addEventListener(b,c)},e.prototype.setupElements=function(){return this.drop=document.createElement("div"),f(this.drop,k.classPrefix),this.options.classes&&f(this.drop,this.options.classes),this.content=document.createElement("div"),f(this.content,""+k.classPrefix+"-content"),"object"==typeof this.options.content?this.content.appendChild(this.options.content):this.content.innerHTML=
this.options.content,this.drop.appendChild(this.content)},e.prototype.setupTether=function(){var a,c;return c=this.options.position.split(" "),c[0]=z[c[0]],c=c.join(" "),a=[],a.push(this.options.constrainToScrollParent?{to:"scrollParent",pin:"top, bottom",attachment:"together none"}:{to:"scrollParent"}),a.push(!1!==this.options.constrainToWindow?{to:"window",attachment:"together"}:{to:"window"}),b={element:this.drop,target:this.target,attachment:u(c),targetAttachment:u(this.options.position),classPrefix:k.classPrefix,
offset:"0 0",targetOffset:"0 0",enabled:!1,constraints:a},!1!==this.options.tetherOptions?this.tether=new Tether(y({},b,this.options.tetherOptions)):void 0},e.prototype.setupEvents=function(){var a,b,c,e,f,g,h,k,l,m,n=this;if(this.options.openOn){if("always"===this.options.openOn)return void setTimeout(this.open.bind(this));if(c=this.options.openOn.split(" "),0<=G.call(c,"click"))for(f=function(a){return n.toggle(),a.preventDefault()},b=function(a){return!n.isOpened()||a.target===n.drop||n.drop.contains(a.target)||
a.target===n.target||n.target.contains(a.target)?void 0:n.close()},l=0,m=d.length;m>l;l++)a=d[l],this._on(this.target,a,f),this._on(document,a,b);return 0<=G.call(c,"hover")?(e=!1,k=function(){return e=!0,n.open()},h=null,g=function(){return e=!1,null!=h&&clearTimeout(h),h=setTimeout(function(){return e||n.close(),h=null},50)},this._on(this.target,"mouseover",k),this._on(this.drop,"mouseover",k),this._on(this.target,"mouseout",g),this._on(this.drop,"mouseout",g)):void 0}},e.prototype.isOpened=function(){return h(this.drop,
""+k.classPrefix+"-open")},e.prototype.toggle=function(){return this.isOpened()?this.close():this.open()},e.prototype.open=function(){var a,b,c=this;if(!this.isOpened())return this.drop.parentNode||document.body.appendChild(this.drop),null!=(a=this.tether)&&a.enable(),f(this.drop,""+k.classPrefix+"-open"),f(this.drop,""+k.classPrefix+"-open-transitionend"),setTimeout(function(){return f(c.drop,""+k.classPrefix+"-after-open")}),null!=(b=this.tether)&&b.position(),this.trigger("open"),k.updateBodyClasses()},
e.prototype.close=function(){var b,c,d=this;if(this.isOpened())return C(this.drop,""+k.classPrefix+"-open"),C(this.drop,""+k.classPrefix+"-after-open"),this.drop.addEventListener(a,b=function(){return h(d.drop,""+k.classPrefix+"-open")||C(d.drop,""+k.classPrefix+"-open-transitionend"),d.drop.removeEventListener(a,b)}),this.trigger("close"),null!=(c=this.tether)&&c.disable(),k.updateBodyClasses(),this.options.remove?this.remove():void 0},e.prototype.remove=function(){var a;return this.close(),null!=
(a=this.drop.parentNode)?a.removeChild(this.drop):void 0},e.prototype.position=function(){var a;return this.isOpened()&&null!=(a=this.tether)?a.position():void 0},e.prototype.destroy=function(){var a,b,c,d,e,f;this.remove();null!=(a=this.tether)&&a.destroy();f=this._boundEvents;d=0;for(e=f.length;e>d;d++)c=f[d],a=c.element,b=c.event,c=c.handler,a.removeEventListener(b,c);return this._boundEvents=[],this.tether=null,this.drop=null,this.content=null,this.target=null,r(l[k.classPrefix],this),r(k.drops,
this)},e}(n),k};window.Drop=F();document.addEventListener("DOMContentLoaded",function(){return Drop.updateBodyClasses()})}).call(this);
