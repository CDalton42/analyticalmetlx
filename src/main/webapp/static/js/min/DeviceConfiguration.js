var DeviceConfiguration=function(){var C=Date.now(),c="browser",D=function(){var a=!1;try{a="jid"in Conversations.getCurrentConversation()}catch(b){a=!1}return"projector"!=c&&a},d={tools:!1,slides:!1,header:!1},e=function(a,b){D&&("header"==a||1!=b&&0!=b||(d[a]=b))},r=function(){c=null!=navigator.userAgent.match(/iPhone/i)||null!=navigator.userAgent.match(/iPod/i)?"iPhone":null!=navigator.userAgent.match(/iPad/i)?"iPad":null!=navigator.userAgent.match("Trident/7.0")?"IE11+":"browser";console.log("device:",
c)},f=function(){r();$("#absoluteCloseButton").removeClass("closeButton").text("").click(bounceAnd(function(){}));$("#applicationMenuButton").show();b=m;try{"Conversations"in window&&"jid"in Conversations.getCurrentConversation()&&("UserSettings"in window&&UserSettings.getIsInteractive()?(DeviceConfiguration.setHeader(!0),DeviceConfiguration.setTools(!0),DeviceConfiguration.setSlides(!0)):(DeviceConfiguration.setHeader(!1),DeviceConfiguration.setTools(!1),DeviceConfiguration.setSlides(!1)))}catch(a){console.log("error while trying to fix the layout:",
a)}zoomToPage();b()},F=function(){Conversations.enableSyncMove();UserSettings.setIsInteractive(!1);c="projector";e("tools",!1);e("slides",!1);e("header",!1);b=E;zoomToFit();$("#absoluteCloseButton").addClass("closeButton").text("X").click(bounceAnd(function(){UserSettings.setIsInteractive(!0);f()}));$("#applicationMenuButton").hide();Modes.none.activate();b()},m=function(){x(d.header,d.tools,d.slides)},b=m,E=function(){x(!1,!1,!1)},x=function(a,b,e){var A=d.header,c=d.tools,B=d.slides,t=$("#toolsColumn"),
f=$("#ribbon").find(".toolbar"),l=$(".modeSpecificTool"),g=function(a){try{var h=parseInt(a.split("px")[0]);return isNaN(h)?0:h}catch(b){return 0}},u=function(a){return{x:_.sum(_.map(a,function(h){var a=g(h.css("margin-left"))+g(h.css("padding-left"))+g(h.css("border"));h=g(h.css("margin-right"))+g(h.css("padding-right"))+g(h.css("border"));return a+h})),y:_.sum(_.map(a,function(a){var b=g(a.css("margin-top"))+g(a.css("padding-top"))+g(a.css("border"));a=g(a.css("margin-bottom"))+g(a.css("padding-bottom"))+
g(a.css("border"));return b+a}))}},r=$("#masterLayout"),m=$("#boardHeader"),n=$("#applicationMenu");$("#boardContainer");var v=$("#boardColumn"),w=$("#thumbsColumn");$("#slideContainer");$("#thumbScrollContainer");var p=$(".thumbnail");a=W.getViewportDimensions();var k=a.width,q=a.height;try{(function(){1==A?(m.show(),n.show()):(n.hide(),m.hide());1==c?(f.show(),l.show(),t.show()):(l.hide(),f.hide(),t.hide());1==B?w.show():w.hide();var a=$("#boardContainer");$("#board");var b=$("#masterHeader");$("#thumbColumnDragHandle").width(DeviceConfiguration.preferredSizes.handles);
p.width(DeviceConfiguration.preferredSizes.thumbColumn.width);p.height(DeviceConfiguration.preferredSizes.thumbColumn.height);a.width();a.height();var z=r.css("flex-direction");"row"==z?(a=k-t.width()-w.width()-u([t,w,v]).x-2,b=q-b.height()-u([b,v]).y-10):(a=k-u([v]).x-2,b=a-10);if(0>b||0>a)throw{message:"retrying because of negativeValues",bheight:b,bwidth:a,width:k,height:q,marginsForBoard:u([v]),flexDirection:z};a=Math.round(a);b=Math.round(b);$("#selectionAdorner");$("#radar");$("#marquee");$("#textAdorner");
$("#imageAdorner");boardContext.canvas.width=a;boardContext.canvas.height=b;boardContext.width=a;boardContext.height=b;boardWidth=a;boardHeight=b})(),IncludeView["default"](),blit()}catch(G){console.log("exception in fit",G),_.defer(function(){_.delay(x,250,(A,c,B))})}window.scrollTo(1,1);window.scrollTo(0,0)},n=function(){b&&b()},p=!1;Progress.onLayoutUpdated.DeviceConfiguration=n;Progress.historyReceived.DeviceConfiguration_showChrome=function(){try{"UserSettings"in window&&UserSettings.getIsInteractive()?
(console.log("enabling tools and slides"),DeviceConfiguration.setSlides(!0),DeviceConfiguration.setTools(!0),!p&&"Modes"in window&&(Modes.draw.activate(),"iPad"==DeviceConfiguration.getCurrentDevice()&&$("#panMode").remove())):(console.log("disabling because it's not interactive"),DeviceConfiguration.setSlides(!1),DeviceConfiguration.setTools(!1),p||Modes.none.activate()),p=!0}catch(a){console.log("Progress.historyReceived.DeviceConfiguration_showChrome",a)}r();k();b&&b()};$(function(){var a=$(window);
if(window.orientation)a.on("orientationchange",n);a.resize(n);$("#toolsToggleButton").on("click",bounceAnd(function(){e("tools",!d.tools);var a=$("#slidesToggleButton");d.slides?a.removeClass("disabledButton"):a.addClass("disabledButton");b&&b()}));$("#slidesToggleButton").on("click",bounceAnd(function(){e("slides",!d.slides);var a=$("#toolsToggleButton");d.tools?a.removeClass("disabledButton"):a.addClass("disabledButton");b&&b()}));(function(a,d){var e=$(a),c=!1,f=0;registerPositionHandlers(e,function(a){f=
a;c=!0},function(a){c&&(d(e,a-f),b())},function(a){c&&_.defer(function(){c=!1;d(e,a-f);b()})})})("#thumbColumnDragHandle",function(a,b){var c=$(".thumbnail").width()-b;DeviceConfiguration.preferredSizes.thumbColumn.width=c;DeviceConfiguration.preferredSizes.thumbColumn.height=.75*c})});var k=function(){switch(c){case "browser":f();break;case "projector":void 0!=ContentFilter&&"setFilter"in ContentFilter&&ContentFilter.setFilter("myPrivate",!1);F();break;case "iPhone":f();break;case "iPad":f();break;
default:f()}},l=function(){b||(b=m)},q=function(a){return function(){e(a,!d[a]);l()}},y=function(a){return function(b){e(a,b);l()}};return{getCurrentDevice:function(){return c},setCurrentDevice:function(a){c=a;k()},applyFit:function(){l();b()},tempFit:function(a,c,d){e("header",a);e("tools",c);e("slides",d);l();b()},setHeader:y("header"),setTools:y("tools"),setSlides:y("slides"),toggleHeader:q("header"),toggleTools:q("tools"),toggleSlides:q("slides"),getIdentity:function(){return C},resetCurrentDevice:function(){r();
k()},preferredSizes:{handles:50,thumbColumn:{width:100,height:75},toolsColumn:100}}}();
