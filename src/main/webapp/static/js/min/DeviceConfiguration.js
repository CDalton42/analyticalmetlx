var DeviceConfiguration=function(){var B=Date.now(),l="browser",C=function(){var b=!1;try{b="jid"in Conversations.getCurrentConversation()}catch(a){b=!1}return"projector"!=l&&b},h={tools:!1,slides:!1,header:!1,keyboard:!1},f=function(b,a){C&&("header"==b||1!=a&&0!=a||(h[b]=a))},q=function(){l=null!=navigator.userAgent.match(/iPhone/i)||null!=navigator.userAgent.match(/iPod/i)?"iPhone":null!=navigator.userAgent.match(/iPad/i)?"iPad":null!=navigator.userAgent.match("Trident/7.0")?"IE11+":"browser"},
m=function(){q();$("#absoluteCloseButton").removeClass("closeButton").text("").click(bounceAnd(function(){}));$("#applicationMenuButton").show();d=r;try{"Conversations"in window&&"jid"in Conversations.getCurrentConversation()&&("UserSettings"in window&&UserSettings.getIsInteractive()?(DeviceConfiguration.setHeader(!0),DeviceConfiguration.setTools(!0),DeviceConfiguration.setSlides(!0)):(DeviceConfiguration.setHeader(!1),DeviceConfiguration.setTools(!1),DeviceConfiguration.setSlides(!1)))}catch(b){console.log("error while trying to fix the layout:",
b)}zoomToPage();d()},E=function(){Conversations.enableSyncMove();UserSettings.setIsInteractive(!1);l="projector";f("tools",!1);f("slides",!1);f("header",!1);d=D;zoomToFit();$("#absoluteCloseButton").addClass("closeButton").text("X").click(bounceAnd(function(){UserSettings.setIsInteractive(!0);m()}));$("#applicationMenuButton").hide();Modes.none.activate();d()},r=function(){A(h.header,h.tools,h.slides,h.keyboard)},d=r,D=function(){A(!1,!1,!1,!1)},e=function(b){b=parseInt(b.split("px")[0]);return isNaN(b)?
0:b},u=function(b){return{x:_.sum(_.map(b,function(a){var b=e(a.css("margin-left"))+e(a.css("padding-left"))+e(a.css("border"));a=e(a.css("margin-right"))+e(a.css("padding-right"))+e(a.css("border"));return b+a})),y:_.sum(_.map(b,function(a){var b=e(a.css("margin-top"))+e(a.css("padding-top"))+e(a.css("border"));a=e(a.css("margin-bottom"))+e(a.css("padding-bottom"))+e(a.css("border"));return b+a}))}},t={},c=function(b){if(!(b in t)){var a=$(b);a&&a.length&&(t[b]=a);return a}return t[b]},A=function(b,
a,d,e){if("undefined"!=typeof boardContext){var f=h.header,l=h.tools,m=h.slides;b=h.keyboard;var k=c("#toolsColumn"),n=c("#ribbon").find(".toolbar"),p=c(".modeSpecificTool"),v=c("#masterLayout"),q=c("#boardHeader"),r=c("#applicationMenu");c("#boardContainer");a=c("#boardColumn");var g=c("#thumbsColumn");c("#slideContainer");c("#thumbScrollContainer");var t=$(".thumbnail");e=W.getViewportDimensions();d=e.width;e=e.height;1==f?(q.show(),r.show()):(r.hide(),q.hide());1==l?(n.show(),p.show(),k.show()):
(p.hide(),n.hide(),k.hide());1==m?g.show():g.hide();l=c("#boardContainer");c("#board");f=c("#masterHeader");c("#thumbColumnDragHandle").width(DeviceConfiguration.preferredSizes.handles);t.width(DeviceConfiguration.preferredSizes.thumbColumn.width);t.height(DeviceConfiguration.preferredSizes.thumbColumn.height);l.width();l.height();v=v.css("flex-direction");"row"==v?(k=d-k.width()-g.width()-u([k,g,a]).x-2,g=e-f.height()-u([f,a]).y-10):(k=c("#masterLayout").width()-u([a]).x,g=k-10,b&&(g-=DeviceConfiguration.preferredSizes.keyboard,
g+=3*(DeviceConfiguration.preferredSizes.handles+2)));if(0>g||0>k)throw{message:"retrying because of negativeValues",bheight:g,bwidth:k,width:d,height:e,marginsForBoard:u([a]),flexDirection:v};k=Math.round(k);g=Math.round(g);c("#selectionAdorner");c("#radar");c("#marquee");c("#textAdorner");c("#imageAdorner");boardContext.canvas.width=k;boardContext.canvas.height=g;boardContext.width=k;boardContext.height=g;boardWidth=k;boardHeight=g;IncludeView["default"]();blit();window.scrollTo(1,1);window.scrollTo(0,
0)}},w=function(){d&&d()},x=!1;Progress.onLayoutUpdated.DeviceConfiguration=w;Progress.historyReceived.DeviceConfiguration_showChrome=function(){try{"UserSettings"in window&&UserSettings.getIsInteractive()?(DeviceConfiguration.setSlides(!0),DeviceConfiguration.setTools(!0),!x&&"Modes"in window&&(Modes.draw.activate(),"iPad"==DeviceConfiguration.getCurrentDevice()&&$("#panMode").remove())):(DeviceConfiguration.setSlides(!1),DeviceConfiguration.setTools(!1),x||Modes.none.activate()),x=!0}catch(b){console.log("Progress.historyReceived.DeviceConfiguration_showChrome",
b)}q();y();d&&d()};$(function(){var b=$(window);if(window.orientation)b.on("orientationchange",w);b.resize(w);$("#toolsToggleButton").on("click",bounceAnd(function(){f("tools",!h.tools);var a=$("#slidesToggleButton");h.slides?a.removeClass("disabledButton"):a.addClass("disabledButton");d&&d()}));$("#slidesToggleButton").on("click",bounceAnd(function(){f("slides",!h.slides);var a=$("#toolsToggleButton");h.tools?a.removeClass("disabledButton"):a.addClass("disabledButton");d&&d()}))});var y=function(){switch(l){case "browser":m();
break;case "projector":void 0!=ContentFilter&&"setFilter"in ContentFilter&&ContentFilter.setFilter("myPrivate",!1);E();break;case "iPhone":m();break;case "iPad":m();break;default:m()}},n=function(){d||(d=r)},z=function(b){return function(){f(b,!h[b]);n()}},p=function(b){return function(a){f(b,a);n()}};return{getCurrentDevice:function(){return l},setCurrentDevice:function(b){l=b;y()},applyFit:function(){n();d()},tempFit:function(b,a,c){f("header",b);f("tools",a);f("slides",c);n();d()},setHeader:p("header"),
setTools:p("tools"),setSlides:p("slides"),setKeyboard:function(b){var a=!b;p("keyboard")(b);DeviceConfiguration.applyFit();$("#masterHeader").toggle(a);$(".permission-states").toggle(a);$("#majorModesColumn").toggle(a)},toggleHeader:z("header"),toggleTools:z("tools"),toggleSlides:z("slides"),getIdentity:function(){return B},resetCurrentDevice:function(){q();y()},hasOnScreenKeyboard:function(){return 640>=W.getViewportDimensions().width},preferredSizes:{handles:50,thumbColumn:{width:100,height:75},
toolsColumn:100,keyboard:236}}}();
